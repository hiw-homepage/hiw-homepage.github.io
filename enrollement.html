<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="shortcut icon" href="./img/logos/favicon.ico" type="image/x-icon">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Zilla+Slab:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./css/base.css">
        <link rel="stylesheet" href="./css/forms.css">
        <script src="https://code.jquery.com/jquery-3.6.1.slim.min.js" integrity="sha256-w8CvhFs7iHNVUtnSP0YKEg00p9Ih13rlL9zGqvLdePA=" crossorigin="anonymous"></script>
        <script src="./js/enrollement.js"></script>
        <title>入会フォーム</title>
    </head>
    <body>
        <header>
            <div>
                <a id="logo" href="./">hiw</a><br><div class="links">
                    <a href="./terms">Terms</a>
                    <a href="./enrollement">Enrollment</a>
                    <a href="./contact">Contact</a>
                </div>
            </div>
        </header>
        <main>
            <div id="text">
                <h1>入会フォーム</h1>
                <p>入会をお考えの際は<a href="./terms" target="_blank">規約</a>に同意したのち、このフォームに回答してください。</p>
                <p>それ以外の連絡は<a href="./contact" target="_blank">お問い合わせ</a>まで。</p>
                <small>全ての項目が必須です</small>
            </div>
                <iframe src="" name="hidden" frameborder="0"></iframe>
                <form id="form" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfBL3lz6HeC8NHKehtAhdUuZnZb0umc2nM5_MjlzZzXtuFAFg/formResponse" target="hidden">
                    <div>
                        <label for="entry.399419356">名前<span>*</span><input type="text" name="entry.1387815750" required autocomplete="off"></label>
                        <label for="entry.1144428312">メールアドレス<span>*</span><input type="email" name="entry.1736430845" autocomplete="off"></label>
                    </div>
                    <button class="button" type="submit">送信</button>
                    <p id="log"></p>
                    <script>
                        function logSubmit(event) {
                        const nowDate = new Date();
                        $('#log').text(nowDate.toLocaleString());
                        $('main form label input').attr({
                            'disabled': 'disabled',
                            'title': 'このフォームはすでに送信されています'
                        });
                        $('main form label input').css('opacity', '.5');
                        $('button[type="submit"]').attr('disabled', 'disabled');
                        $('button[type="submit"]').css({
                            'background-color': '#c0c0c0',
                            'border': '4px solid #c0c0c0',
                            'cursor': 'not-allowed'
                        });
                        setTimeout(function() {
                            event.preventDefault();
                        }, 500);
                        localStorage.setItem('efSubmitted', 'true');
                        }
                
                        const form = document.getElementById('form');
                        form.addEventListener('submit', logSubmit);
                    </script>
                </form>
        </main>
    </body>
</html>